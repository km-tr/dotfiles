function peco_select_from_git_status(){
    git status --porcelain | \
    peco | \
    awk -F ' ' '{print $NF}' | \
    tr '\n' ' '
}

function peco_insert_selected_git_files(){
    LBUFFER+=$(peco_select_from_git_status)
    CURSOR=$#LBUFFER
    zle reset-prompt
}

zle -N peco_insert_selected_git_files
bindkey "^x^s" peco_insert_selected_git_files


function peco_git_branches() {
    local res=$(git branch -a | sed 's/^\*/ /' | awk '{ print $1 }' | peco)
    BUFFER+=$res
    zle clear-screen
}
zle -N peco_git_branches
bindkey '^x^r' peco_git_branches
